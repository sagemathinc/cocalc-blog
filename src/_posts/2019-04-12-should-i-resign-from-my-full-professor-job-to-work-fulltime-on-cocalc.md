---
author: "William Stein"
date: "April 12, 2019"
title: "Should I Resign From My Full Professor Job To Work Fulltime On Cocalc?"
---

Nearly 3 years ago, I gave [a talk](https://wstein.org/talks/2016-06-sage-bp/) at a Harvard mathematics conference
announcing that "I am leaving academia to build a company".
What I really did is go on *unpaid leave* for three years
from my tenured Full Professor position.  No further extensions
of that leave is possible, so I finally have to decide
whether or not to go back to academia or resign.

## How did I get here?

Nearly two decades ago, as a recently minted Berkeley math Ph.D., I was hired
as a non-tenure-track faculty member in the mathematics department 
at Harvard. I spent five years at Harvard, then I applied for 
jobs, and accepted a tenured Associate Professor position in
the mathematics department at UC San Diego.  The mathematics
community was very supportive of my number theory research; I skipped
tenure track, and landed a tier-1 tenured position by the time
I was 30 years old.  In 2006, I moved from UCSD to a tenured
Associate Professor position at the University of Washington (UW)
mathematics department, primarily because my wife was a graduate 
student there, UW has strong research in number theory and algebraic
geometry, and they have a good 
culture supporting undergraduate research.

Before I left Harvard, I started the [SageMath open source software project](https://sagemath.org), initially with
the longterm goal of creating a free open source viable alternative
to Mathematica, Maple, Matlab and Magma.
As a result, in addition to publishing [dozens of
research mathematics papers](https://wstein.org/papers/) and
[some books](https://wstein.org/books/), I also started spending
a lot of my time writing software, and 
organizing [Sage Days workshops](https://wiki.sagemath.org/Workshops#Past_Workshops).

## Recruiting at UW Mathematics

At UW, I recruited an
amazing team of undergraduates and grad students
who had a major impact on the development of Sage.
I was blown away by
the quality of the students (both undergrad and grad)
that I was able to get involved in Sage development.
I fully expected that in the next few years I would have the resources
to hire some of these students to work fulltime on Sage.
They had written the first versions of much of the core functionality
of Sage (e.g., graph theory, symbolic calculus, matrices, and much more).

I was surprised when my application for Full Professor at 
UW was delayed for one year because -- I was told -- I wasn't
publishing enough research papers. This  was because I was working
very hard on building Sage, which was going extremely well at the time.
I took the feedback seriously, and put more time into traditional
research and publishing; this was the first time in my life that I did research
mathematics for reasons other than just because I loved doing it.

I tried very hard to hire [Bill Hart](http://wbhart.blogspot.com/)
as a tenure-track faculty member at UW.
However, I was told that his publication count was *"a bit light"*, and I did not
succeed at hiring him. If you printed out the source
code of software he has written, it would be a tall stake of paper.
In any case, I totally failed at the politics needed to make
his case and was left dispirited, realizing my
personal shortcomings at department politics meant I probably
could not hire the sort of colleagues I desperately needed.

UW was also very supportive of me teaching
an undergrad course on open source math software (it evolved
into [this](https://github.com/kedlaya/math157)).  I taught
a similar course at the graduate level once, and it went
extremely well, and was in mind the best course I ever
taught at UW.  I was extremely surprised when my
application to teach
that grad course again was denied, and I was told that
grad students should just go to my undergraduate course.
I thought, "this is really strange", instead of
lobbying to teach the course and better presenting
my case.

To be clear, I do not mean to criticize the mathematics department.
The UW math department has thought very hard and systematically about
their priorities and how they fit into UW.  They are a traditional *pure* mathematics
departments that is generally ranked around 25 in the country,
with a particular set of strengths.  There is a separate
applied math department on campus, several stats departments, and
a massive **School** of Computer Science.   Maybe I was in the
wrong place to try to hire somebody whose main qualification
is being world class at writing mathematical software.  This blog post is
about the question of whether the UW math department is the right
place for me or not.

## Outside Grant Support?

My number theory research received incredible support from the NSF, 
with me being the PI on [six NSF grants](https://wstein.org/grants/).
Also, [Magma](https://magma.maths.usyd.edu.au) (which is similar to Sage, but
closed source) had  managed to find
sufficient government funding, so I remained optimistic.  Maybe I could
fund people to build Sage via grants, and even start an institute!
I applied for grants to support work on SageMath at a larger scale,
and had some initial success (half of a postdoc, and 
some workshops, etc.).

Why is grant funding so important for Sage?
The goal of the SageMath project is to create free open source
software that is a viable alternative to Mathematica, Maple, Matlab, and
Magma -- software produced by companies with a combined thousands of fulltime employees.
Though initial progress was encouraging,
it was clear that I desperately needed significant money to
genuinely compete.  For example,  one Sage developer had
a fantastic Sage development project he wanted about 20K to work 
fulltime on during a summer, and I could not find the money; 
as a result he quit working on Sage.  This project involved implementing some
deep algorithms that are needed to more directly compete with
Mathematica for solving symbolic inequalities.
This sort of thing happened over and over again,
and it began to really frustrate me.  I could get plenty of funding for 
1-week workshops (just travel expenses -- everybody works for free), 
but there's only so much you can do at such sprints.

I kept hearing that there would be a big one-in-10-years 
NSF institutes competition sometime in the "next year or two".
People hinted to me that this would be a good thing to watch
out for, and I dreamed that I could found such an institute, with
the mission to make it so the mathematics 
community finally owned the deep software on which teaching 
and research are based.  This institute would bring the same 
openness and robustness to  computational mathematics that
rigorous proof had brought to mathematics itself a century 
earlier.

Alas, this did not happen.  I remember the moment I found
out about the actual NSF institutes competition.  [Joe
Silverman](http://www.math.brown.edu/~jhs/) was standing behind me
at a coffee break at [The Arizona Winter School 2010](http://swc.math.arizona.edu/aws/2010/index.html) telling people
about how [his proposal for ICERM](https://icerm.brown.edu/) 
had just won the NSF institutes competition.
I spun around and congratulated him as I listened to how much work it was to put
together the application during the last yearl internally,
my heart sunk.  Not only did I not win, I didn't even know the
competition had happened! I guess I was too busy working on Sage.
In any case, my fantasy of creating an NSF-funded institute
 died at that moment.   Of course, ICERM has turned out to be a fantastic
institute, and it has hosted several workshops that support 
the development of open source math software.

Around this time, I also started [having my grant proposals denied](https://wstein.org/grants/) for reasons I do not understand.
This was confusing to me, after having received so many
NSF grants before.
In 2012, the Simons Foundation put out a call for something
that potentially addressed what I had hoped to accomplish via
an NSF-funded institute.  I was very excited again, but
that [did not turn out as I had hoped](http://sagemath.blogspot.com/2015/09/the-simons-foundation-and-open-source.html).  So next I tried something I never
thought I would ever do in a million years...


## Commercialization at UW

For various reasons, I failed to get the NSF or other foundations to
fund Sage at the level I needed, so in 2013, 
I decided to try to sell
a commercial product, and use the profits to fund Sage development. 
I first tried to do this at University of Washington, by working
with [the commercialization office (C4C)](https://comotion.uw.edu/)
to sell access to Sage online. As long as the business  and product were
merely abstract ideas (e.g., let's make up a name and trademark it! 
let's write some terms of service!) things went fine. However, when things
became much more concrete, working with C4C got strange and frustrating
for me. I was clearly missing something.

For example, the first thing C4C told me on the very first day we
sat down together was they would not work with me if I made the software
I wrote for this open source, and that the university would own the software.
Given there was no software at all yet, and I imagined I would just whip
out a quick modern web-based frontend to Sage and make boatloads of money
that would go straight into a UW account to be 
used to fund Sage, this seemed fine to me.  However, I had a nagging feeling
that a pure closed-source approach to this problem was impossible, and not
having that flexibility would come back to haunt me.

Naively optimistic, I found myself working fulltime at UW and 
at the same time trying to get a
sophisticated web application off the ground by myself, with many
important early users
depending on it for their classes.  This was stressful and took an enormous
amount of time and attention.   I felt like I was just part of the software, often getting
warnings that things were broken or breaking, and **manually** fixing them.
The toil was high, and only got worse as more people used the software.  
I would get woken up all night.
I couldn't travel since things were constantly breaking.

> *Every time I fought through
some really difficult problem with the web application
instead of just giving up, I came
out far more determined not to quit.*

The web application described above evolved over 6 years into what
is now https://CoCalc.com; the functionality was pretty similar from
day 1, but quality and scalability have come a long ways.  CoCalc
lets you collaboratively use LaTeX, Sage, Terminals, Jupyter Notebooks,
etc., for teaching and research.

In 2014, I went on sabbatical and worked fulltime developing this
web application and the feedback loop I described above only grew 
more intense: fix things, fight through difficult problems,
be even more determined not to give up.
Fortunately, I had some leftover NSF grant funds, and was able to 
use them to hire several students to help with
development.  I failed to find students
who I could hire to do the backend work (and be available any time
day or night), 
which meant that much of the stress
of keeping the site running continued to fall squarely on my shoulders.
And as the site grew in popularity (and functionality), the stress
from it got worse.

My Sabbatical ended, and I was required
to return to UW fulltime for one year, 
or return all the money I was paid during my sabbatical.
So far, CoCalc had grown in popularity, but I had not been allowed
by the "commercialization office" to actually commercialize it, so it
was still a free site.

I taught at UW at the same time as being the main 
person trying to run this very complicated and painful production web application. 
Based on user feedback, 
I was also highly motivated to improve CoCalc.  I would typically
sleep a few hours, get up at 3am and write code until 8am, then prepare
to teach, hope not to have any site issues right before class, and
so on.  One day CoCalc got hit by a massive DDoS attack minutes before
a class I was teaching, while I was talking with a prospective donor
to the math department.

I am the sort of person who does well focusing on exactly one thing
at a time. Given the chance to fully focus on one thing for extended
periods of time, I sometimes even do things that really matter and
have an impact.   I am not great at doing many different things at once.

In the meantime, Sage itself was growing and receiving funding, though this
had nothing to do with me. 
For example, Gregg Musiker was putting together a [big program at 
IMA](https://www.ima.umn.edu/2017-2018.2/W8.21-25.17), in the form
of a ton of Sage Days workshops.  Also, the
[huge ODK project](https://opendreamkit.org/), which was a European 
Union grant proposal to support open source math software would be fully funded.
And closer to home, Moore and Sloane funded a [major new initiative](https://escience.washington.edu/) that could potentially have also 
supported work on Sage.
I was invited to go to workshops and events involving these and other
grants, but often I either said no or canceled at the last minute
due to the toil needed just to keep CoCalc running.  Also, I believed
if I could start charging customers, then I would have a lot more 
money, and could hire more help.

I met with more senior people at UW's C4C to
finally actually charge people to use CoCalc.  They wanted me
to do some integration with their license management system, and sell
"express" software licenses.  It didn't make any sense to me,
and we went around in circles.   I then asked about
actually starting a separate company (a legal entity) that the university
would have some ownership in, so that the company could take payments,
etc.  This is when things got really weird.  They would not talk with
me about creating the company due to "conflict of interest".

I searched for other UW faculty that had commercialized remotely
similar products, and found one. He told me how it went, and
said it was the worst experience of his life. UW owned
50% of the company, and all of the software of the
company, which they licensed under onerous terms. They refused
to negotiate anything with him, instead requiring his spinoff company to
hire an outside negotiator.  As a result of all this,
I educated myself as much as possible about relevant
rules and laws, and consulted with a lawyer.

It turns out that the NSF grants I used to fund work on CoCalc
explicitly stipulated that code funded by those grants had
to be GPL licensed.  [This meant all the code for CoCalc
had to be open sourced.](https://news.ycombinator.com/item?id=8967094)  
Later the university even agreed
in writing to release a snapshot of all the CoCalc code
under the BSD license, and I haven't been paid a penny by
UW since the date of that release, so there is no possible 
claim that the company can't use the code.

## Building a company

A colleague of mine from when I was at 
Harvard was in town for a day, and we met for coffee. He expected
we would talk about Sage and number theory, but
instead I told him about CoCalc and my attempts at commercialization
and starting a company.    He immediately suggested a solution to
my problems, which was to talk with a friend of his who had both 
extensive experience working with companies and deep connections with
mathematics.   I was confident that in the
worst case I could quit my job at UW and rewrite all the software
from scratch, so I took him up on the offer.

In 2015 I formed a corporation, and received some outside investment,
and used that (and dramatically cutting my already-small academic
income) to "leave academia".  More precisely, in 2016 (after working fulltime 
for a year at UW), I finally went
on 100% unpaid leave from UW in order to
completely focus on CoCalc development and getting a business off the ground. 
Also, there was no good reason
to quit a tenured Full Professor job when you can go
on leave; also CoCalc supports teaching in math departments,
so it is closely related to my academic job. 
The only academic responsibilities
I had were to my two Ph.D. students, who I meet with one-on-one
at least once a week. At the end of two years, I requested
a third year of unpaid leave, which UW granted (this is not routine).
Throughout all this, the UW mathematics department was very supportive.

During these three years on unpaid leave, I've hired [three other
people](http://blog.sagemath.com/cocalc/2018/09/10/where-is-cocalc-from.html) who work fulltime on CoCalc.  Together we have massively improved
the software, and built a business with thousands of paying
customers.   The company is still not profitable,
though the future is clearly very bright if we continue what we
are currently doing.  CoCalc has become a  platform that 
an increasing number of scalable products (such as
[this](https://wit.io/portfolio/minerva-active-learning-forum)) 
are being built with, and there is enormous growth potential 
in the next year.

At this point, [it rightfully appears to the community](https://github.com/sagemath/website/pull/162#issue-248232293)
that I have left SageMath development to
focus fulltime on building CoCalc as an independent business.
Indeed, I do not spend any significant time contributing to Sage,
and I even switched to getting daily digests of [the sage-devel mailing list](https://groups.google.com/forum/#!forum/sage-devel).

On the other hand, as mentioned above, CoCalc is going
well by many metrics (in terms of quality, feature development,
customer love, market position, etc.). 
Most importantly, me and the other three people
who work fulltime on CoCalc really, really love this job,
and the potential to have a significant impact.
I still don't know if CoCalc will ever be wildly profitable and
massively fund Sage
development.  If I were to
obsess over only that goal, I would have to quit
working on CoCalc (since it is taking way too long) and
pursue other opportunities for funding Sage.

> *In retrospect, my idea from 7 years ago to start a web-based 
software company from scratch and build it into a successful
profitable business has so far completely failed to fund Sage.*

It would be far easier to work fulltime writing grants to foundations,
and leveraging the [acknowledged success](http://www.sigsam.org/awards/jenks/awardees/2013/) 
of Sage so far.  I made the wrong move, given my original goal. The
surprise is that **I really enjoy** what I'm doing right now!

## My unpaid leave is up -- what am I going to do?

My third year of unpaid leave from UW is up. I have to decide whether
to return to UW or resign. If I return, it turns out that I
would have to have [at least a 50% appointment](https://ap.washington.edu/ahr/academic-titles-ranks/professor/). 
I currently have 50% of one year of teaching in "credits", which means I wouldn't be required
to teach for the first year I go back as a 50% appointment. 
Moreover, the current department chair (John Palmieri) understands and
appreciates Sage -- he  is among the [top 10 all time contributors 
to the source code of Sage](https://github.com/sagemath/sage/graphs/contributors)!

I have decided to resign.  I'm worried about issues of intellectual
property; it would be extremely unfair to my employees, investors and customers
if I took a 50% UW position, and then later got sued by UW as
a result. Having a 50% paid appointment at UW subjects one to a 
lot of legal jeopardy, which is precisely why I have been on 100% unpaid 
leave for the last three years.
But more importantly, I feel very good about continuing
to focus 100% on the development of CoCalc, which is going
to have an incredible year going forward.     I genuinely love 
building this (non-VC funded) company, and feel very good about it.
